<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CaptiPrep · Wordbook</title>
  <link rel="stylesheet" href="cc.css" />
  <style>
    body { margin:0; background:#fafafa; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial; }
    .wb { display:flex; height:100vh; }
    .wb-left { width:220px; padding:16px 12px; display:flex; flex-direction:column; gap:12px; }
    /* Center nav buttons vertically within the sidebar */
    .wb-nav { display:flex; flex-direction:column; gap:8px; margin-top:12px; }
    .wb-nav button { text-align:left; }
    /* Brand: large logo stacked above title */
    .wb-left .brand { display:flex; flex-direction:column; align-items:center; gap:10px; font-weight:800; }
    .wb-left .brand .logo { width:min(160px, 80%); aspect-ratio:1/1; background:url(../icon.png) center/contain no-repeat; }
    .wb-left .brand .logo + span { display:block; font-size:20px; line-height:1.1; text-align:center; }
    .wb-nav .active { background:#000; color:#fff; }

    .wb-right { flex:1; display:flex; flex-direction:column; }
    .wb-toolbar { padding:12px;display:flex; justify-content:flex-end; align-items:center; gap:12px; position:relative; }
    .wb-title { font-weight:800; letter-spacing:.4px; font-size:18px; position:absolute; left:50%; transform: translateX(-50%); text-align:center; }
    .wb-actions { display:flex; gap:8px; }

    .wb-content { flex:1; overflow:auto; padding:16px; }
    .wb-section { margin-bottom:18px; }
    .wb-date { font-weight:800; margin:8px 0; opacity:.8; }

    /* Three cards per row on common widths; slightly larger */
    .wb-grid { display:grid; grid-template-columns: repeat(auto-fill, minmax(440px, 1fr)); gap:12px; }

    .wb-vcard { position:relative; border:2px solid #000; background:#fff; display:flex; padding:0; }
    .wb-vcard .left { width:68%; border-right:2px solid #000; display:flex; flex-direction:column; }
    .wb-vcard .cover { width:100%; aspect-ratio: 16/9; background:#eee; overflow:hidden; }
    .wb-vcard .cover img { width:100%; height:100%; object-fit:cover; display:block; }
    .wb-vcard .title { padding:12px 14px; font-weight:700; line-height:1.3; font-size:18px; }
    .wb-vcard .title.center { text-align:center; }
    .wb-vcard .right { width:32%; position:relative; padding:12px; }
    /* Leave space at top so right-side words don't sit under icons */
    .wb-vcard .terms { position:absolute; inset:52px 12px 12px 12px; overflow:hidden; }
    .wb-vcard .terms .fade { position:absolute; left:0; right:0; bottom:0; height:40%; background: linear-gradient(180deg, rgba(255,255,255,0) 0%, #fff 70%); pointer-events:none; }
    .wb-vcard .term-item { font-size:14px; line-height:1.6; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }

    /* Place select button to the left of the heart (both on right) */
    /* Action icons at card's top-right */
    .wb-vcard .chk { position:absolute; top:8px; right:52px; left:auto; z-index:2; }
    .wb-vcard .fav { position:absolute; top:8px; right:8px; z-index:2; }
    .wb-icon { width:32px; height:32px; border-radius:50%; background:#fff; border:2px solid #000; display:grid; place-items:center; box-shadow:2px 2px #000; cursor:pointer; }
    .wb-icon.active { background:#ff3b3b; color:#fff; }
    .wb-icon.select.active { background:#000; color:#fff; }
    .wb-vcard.selected { outline:3px solid #000; }
    /* Selection icon on word cards */
    .cc-card .chk { position:absolute; top:8px; right:8px; z-index:2; }

    .fade-wrap { position:relative; }
    .fade-pane { transition: opacity .2s ease, transform .2s ease; }
    .fade-pane.enter { opacity:0; transform: translateY(6px); }
    .fade-pane.enter-active { opacity:1; transform:none; }

    /* Detail modal (复用 cc.css 变量) */
    .wb-overlay { position:fixed; inset:0; background: rgba(0,0,0,.6); display:none; align-items:center; justify-content:center; z-index:9999; }
    .wb-modal { position:relative; width:min(1080px, 96vw); height:min(760px, 94vh); background:#fff; border:3px solid #000; box-shadow:8px 8px #000; display:flex; flex-direction:column; }
    .wb-m-header { padding:10px 12px; border-bottom:3px solid #000; background:#fff; display:flex; align-items:center; justify-content:space-between; }
    .wb-m-title { flex:1; text-align:center; font-weight:800; font-size:20px; }
    .wb-m-body { flex:1; overflow:auto; padding:12px 12px 74px; }
    .wb-m-cover { width:100%; aspect-ratio:16/9; background:#eee; overflow:hidden; }
    .wb-m-cover img { width:100%; height:100%; object-fit:cover; display:block; }

    .wb-card-grid { display:grid; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr)); gap:12px; margin-top:12px; }

    .wb-bottom { position:absolute; left:50%; bottom:12px; transform: translateX(-50%); display:flex; gap:12px; }

    .cc-ok { outline: 3px solid #0a0; }
  </style>
</head>
<body>
  <div class="wb">
    <div class="wb-left">
      <div class="brand"><span class="logo"></span><span>CaptiPrep</span></div>
      <div class="wb-nav">
        <button class="cc-btn-white" data-tab="history">历史记录</button>
        <button class="cc-btn-white" data-tab="favVideos">视频收藏</button>
        <button class="cc-btn-white" data-tab="favWords">单词收藏</button>
      </div>
    </div>
    <div class="wb-right">
      <div class="wb-toolbar">
        <div class="wb-title" id="wb-current-title">历史记录</div>
        <div class="wb-actions">
          <button class="cc-btn-white" id="wb-select-all">全选</button>
          <button class="cc-btn-white" id="wb-delete">删除</button>
          <button class="cc-btn-white" id="wb-export">导出</button>
        </div>
      </div>
      <div class="wb-content fade-wrap">
        <div id="wb-pane" class="fade-pane"></div>
      </div>
    </div>
  </div>

  <!-- Detail modal -->
  <div class="wb-overlay" id="wb-overlay" aria-hidden="true">
    <div class="wb-modal" role="dialog" aria-modal="true">
      <div class="wb-m-header">
        <button class="cc-mini-btn" id="wb-close" aria-label="Close">
          <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M18 6L6 18M6 6l12 12"/></svg>
        </button>
        <div class="wb-m-title" id="wb-m-title"></div>
        <span style="width:46px"></span>
      </div>
      <div class="wb-m-body">
        <div class="wb-m-cover"><img id="wb-m-img" alt="cover" /></div>
        <div class="wb-card-grid" id="wb-card-grid"></div>
      </div>
      <!-- bottom controls for big card preview inside modal -->
      <div class="wb-bottom" id="wb-bottom" style="display:none">
        <button class="cc-mini-btn" id="wb-prev" aria-label="Previous">
          <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><polyline points="15 18 9 12 15 6"/></svg>
        </button>
        <button class="cc-mini-btn" id="wb-fav-word" aria-label="Favorite">
          <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M20.8 4.6a5.5 5.5 0 0 0-7.8 0L12 5.6l-1-1a5.5 5.5 0 0 0-7.8 7.8l1 1L12 21l7.8-7.6 1-1a5.5 5.5 0 0 0 0-7.8z"/></svg>
        </button>
        <button class="cc-mini-btn" id="wb-edit" aria-label="Edit">
          <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M12 20h9"/><path d="M16.5 3.5a2.12 2.12 0 1 1 3 3L7 19l-4 1 1-4 12.5-12.5z"/></svg>
        </button>
        <button class="cc-mini-btn" id="wb-save" aria-label="Save" disabled>
          <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><polyline points="20 6 9 17 4 12"/></svg>
        </button>
        <button class="cc-mini-btn" id="wb-next" aria-label="Next">
          <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><polyline points="9 18 15 12 9 6"/></svg>
        </button>
      </div>
    </div>
  </div>

  <!-- Word detail modal (overlay above video detail) -->
  <div class="wb-overlay" id="wb-overlay-card" aria-hidden="true">
    <div class="wb-modal" role="dialog" aria-modal="true">
      <div class="wb-m-header">
        <button class="cc-mini-btn" id="wb2-close" aria-label="Close">
          <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M18 6L6 18M6 6l12 12"/></svg>
        </button>
        <div class="wb-m-title" id="wb2-m-title"></div>
        <span style="width:46px"></span>
      </div>
      <div class="wb-m-body">
        <div id="wb2-big"></div>
      </div>
      <div class="wb-bottom" id="wb2-bottom" style="display:none">
        <button class="cc-mini-btn" id="wb2-prev" aria-label="Previous">
          <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><polyline points="15 18 9 12 15 6"/></svg>
        </button>
        <button class="cc-mini-btn" id="wb2-fav-word" aria-label="Favorite">
          <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M20.8 4.6a5.5 5.5 0 0 0-7.8 0L12 5.6l-1-1a5.5 5.5 0 0 0-7.8 7.8l1 1L12 21l7.8-7.6 1-1a5.5 5.5 0 0 0 0-7.8z"/></svg>
        </button>
        <button class="cc-mini-btn" id="wb2-edit" aria-label="Edit">
          <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M12 20h9"/><path d="M16.5 3.5a2.12 2.12 0 1 1 3 3L7 19l-4 1 1-4 12.5-12.5z"/></svg>
        </button>
        <button class="cc-mini-btn" id="wb2-save" aria-label="Save" disabled>
          <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><polyline points="20 6 9 17 4 12"/></svg>
        </button>
        <button class="cc-mini-btn" id="wb2-next" aria-label="Next">
          <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><polyline points="9 18 15 12 9 6"/></svg>
        </button>
      </div>
    </div>
  </div>

  <script src="wordbook.js" type="module"></script>
</body>
</html>
